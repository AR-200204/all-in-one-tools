<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Sleep Calculator. Find the best time to wake up or go to sleep based on sleep cycles.">
    <title>Sleep Calculator - Sleep Cycle Checker</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <header></header>
    <main class="container" style="padding: 2rem 1rem;">
        <div class="tool-layout">
            <div class="main-content">
                <h1>Sleep Calculator</h1>
                <p>Wake up feeling refreshed by timing your sleep cycles.</p>

                <div class="tool-card">
                    <div class="input-group">
                        <label>I want to wake up at:</label>
                        <input type="time" id="wakeTime" value="07:00">
                    </div>
                    <div class="text-center mt-4">
                        <button id="calcBtn" class="btn w-full">Calculate Bedtime</button>
                    </div>

                    <div class="result-box hidden" id="resultArea">
                        <p>You should go to bed at one of these times:</p>
                        <div id="times" class="flex flex-col gap-2 mt-4 font-bold text-xl text-primary"></div>
                        <p class="text-sm mt-4 text-muted">(Calculated for 90-minute sleep cycles + 15 min to fall
                            asleep)</p>
                    </div>
                </div>

                <article class="content-block mt-4">
                    <h2>Sleep Cycles</h2>
                    <p>A typical sleep cycle lasts about 90 minutes. You pass through five stages of sleep. Waking up in
                        the middle of a deep sleep cycle leads to grogginess.</p>
                </article>
            </div>
            <aside class="sidebar">
                <h3>Health Tools</h3>
                <ul class="flex flex-col gap-2">
                    <li><a href="calorie-calculator.html">Calorie Calculator</a></li>
                    <li><a href="bmi-calculator.html">BMI Calculator</a></li>
                </ul>
            </aside>
        </div>
    </main>
    <footer></footer>
    <script src="../js/main.js"></script>
    <script>
        document.getElementById('calcBtn').addEventListener('click', () => {
            const val = document.getElementById('wakeTime').value;
            if (!val) return;

            const [h, m] = val.split(':').map(Number);
            const wakeDate = new Date();
            wakeDate.setHours(h);
            wakeDate.setMinutes(m);
            wakeDate.setSeconds(0);

            const cycles = [6, 5, 4]; // 9h, 7.5h, 6h
            const results = [];

            cycles.forEach(c => {
                const ms = c * 90 * 60 * 1000 + (15 * 60 * 1000); // Cycles + 15m fall asleep
                const sleeptime = new Date(wakeDate.getTime() - ms);
                results.push(sleeptime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
            });

            document.getElementById('times').innerHTML = results.map(t => `<div>${t}</div>`).join('');
            document.getElementById('resultArea').classList.remove('hidden');
        });
    </script>
</body>

</html>